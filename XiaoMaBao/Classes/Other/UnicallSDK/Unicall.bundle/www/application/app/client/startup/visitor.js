(function(){

/////////////////////////////////////////////////////////////////////////
//                                                                     //
// client/startup/visitor.js                                           //
//                                                                     //
/////////////////////////////////////////////////////////////////////////
                                                                       //
// Generated by CoffeeScript 1.10.0                                    //
(function () {                                                         // 2
  this.visitorId = new ReactiveVar(null);                              // 3
                                                                       //
  Meteor.startup(function () {                                         // 5
    if (localStorage.getItem('rocketChatLivechat') == null) {          // 6
      localStorage.setItem('rocketChatLivechat', Random.id());         // 7
    }                                                                  //
    visitorId.set(localStorage.getItem('rocketChatLivechat'));         // 9
    Meteor.call('hasActiveAgent', new Tools().getUrlParameterByName('tenant_id'), function (e, r) {
      if (e) {                                                         // 11
        showError('系统异常！');                                            // 12
      } else {                                                         //
        if (r === false) {                                             // 14
          showError('没有客服在线！');                                        // 15
        }                                                              //
      }                                                                //
    });                                                                //
  });                                                                  //
}).call(this);                                                         //
/////////////////////////////////////////////////////////////////////////

}).call(this);
