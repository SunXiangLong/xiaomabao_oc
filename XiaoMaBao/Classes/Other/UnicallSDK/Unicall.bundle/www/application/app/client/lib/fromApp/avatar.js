(function(){

/////////////////////////////////////////////////////////////////////////
//                                                                     //
// client/lib/fromApp/avatar.js                                        //
//                                                                     //
/////////////////////////////////////////////////////////////////////////
                                                                       //
// Generated by CoffeeScript 1.10.0                                    //
(function () {                                                         // 2
  this.getAvatarUrlFromUsername = function (username) {                // 3
    var key, random;                                                   // 4
    key = "avatar_random_" + username;                                 // 5
    random = Session.keys[key] || 0;                                   // 6
    if (username == null) {                                            // 7
      return;                                                          // 8
    }                                                                  //
    return new Tools().getPath() + "avatar/" + username + ".jpg?_dc=" + random;
  };                                                                   //
                                                                       //
  this.updateAvatarOfUsername = function (username) {                  // 13
    var key, ref, room, url;                                           // 14
    key = "avatar_random_" + username;                                 // 15
    Session.set(key, Math.round(Math.random() * 1000));                // 16
    ref = RoomManager.openedRooms;                                     // 17
    for (key in babelHelpers.sanitizeForInObject(ref)) {               // 18
      room = ref[key];                                                 // 19
      url = getAvatarUrlFromUsername(username);                        // 20
      $(room.dom).find(".message[data-username='" + username + "'] .avatar-image").css('background-image', "url(" + url + ")");
    }                                                                  //
    return true;                                                       // 23
  };                                                                   //
}).call(this);                                                         //
/////////////////////////////////////////////////////////////////////////

}).call(this);
