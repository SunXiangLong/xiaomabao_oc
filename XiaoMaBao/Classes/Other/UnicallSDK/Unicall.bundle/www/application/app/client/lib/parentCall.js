(function(){

/////////////////////////////////////////////////////////////////////////
//                                                                     //
// client/lib/parentCall.js                                            //
//                                                                     //
/////////////////////////////////////////////////////////////////////////
                                                                       //
//// Generated by CoffeeScript 1.10.0                                  //
//(function() {                                                        //
//                                                                     //
//  this.parentCall = function(method, args) {                         //
//    var data;                                                        //
//    if (args == null) {                                              //
//      args = [];                                                     //
//    }                                                                //
//    data = {                                                         //
//      src: 'rocketchat',                                             //
//      fn: method,                                                    //
//      args: args                                                     //
//    };                                                               //
//    return window.parent.postMessage(JSON.stringify(data), '*');     //
//  };                                                                 //
//  if(window.addEventListener){                                       //
//    window.addEventListener('message',function(msg){                 //
//      receiveMessage(msg);                                           //
//    })                                                               //
//  }else if (window.attachEvent){                                     //
//    window.attachEvent('onmessage', function (msg) {                 //
//      receiveMessage(msg);                                           //
//    })                                                               //
//  }                                                                  //
//  var receiveMessage=function(msg){                                  //
//    console.log('receiveMessage->',msg);                             //
//    if(msg.data){                                                    //
//      try{                                                           //
//        var msgData =  eval("("+msg.data+")");                       //
//        if (typeof msgData === 'object' && msgData.src !== undefined && msgData.src === 'livechat-parent') {
//          var args = [].concat(msgData.args || []);                  //
//          return api[msgData.fn].apply(null, args);                  //
//        }                                                            //
//      }catch(e){                                                     //
//        //msg.data is not a json string                              //
//      }                                                              //
//                                                                     //
//    }                                                                //
//  }                                                                  //
//  var api={                                                          //
//    transferToAWSUrl:function(message){                              //
//      Meteor.call('awsGetSignedUrl', message.url, function (error, awsUrl) {
//        if (awsUrl !== null && awsUrl !== undefined){                //
//          parentCall('receiveAWSUrl',{url:awsUrl,id:message.id});    //
//        }else{                                                       //
//          parentCall('receiveAWSUrl',{url:null,id:message.id});      //
//        }                                                            //
//      })                                                             //
//    }                                                                //
//  }                                                                  //
//}).call(this);                                                       //
/////////////////////////////////////////////////////////////////////////

}).call(this);
